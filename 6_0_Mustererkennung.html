<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mustererkennung mit dem Alvik - Arduino Alvik Lernplattform</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="description" content="Arduino Alvik MicroPython Tutorials und Dokumentation - Mustererkennung und Machine Learning">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.html" style="text-decoration: none;"><img src="assets/MZ_GIVB_Logo.svg" alt="Medienzentrum GieÃŸen-Vogelsberg" class="logo" style="cursor: pointer;"></a>
            <div>
                <h1>Arduino Alvik</h1>
                <p>MicroPython Lernplattform<br><small style="font-size: 0.8em; opacity: 0.9;">Medienzentrum GieÃŸen-Vogelsberg</small></p>
            </div>
        </div>
    </header>
    
    <div class="container">
                        <aside class="sidebar">
            <h2>Navigation</h2>
            
            <!-- Fortschrittsanzeige -->
            <div style="background: linear-gradient(135deg, rgba(227, 6, 19, 0.1), rgba(103, 116, 122, 0.1)); padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                    <span style="font-weight: 600; font-size: 0.9rem;">Dein Fortschritt</span>
                    <span id="progress-percentage" style="font-weight: 700; color: var(--primary-color);">0%</span>
                </div>
                <div style="background: rgba(255,255,255,0.5); border-radius: 8px; height: 10px; overflow: hidden;">
                    <div id="progress-bar" style="background: linear-gradient(90deg, #4ade80, #22c55e); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <div style="font-size: 0.75rem; color: #666; margin-top: 0.5rem;">
                    <span id="progress-text">0 von 16 Lektionen</span>
                </div>
            </div>
            
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Suche...">
            </div>
            
            <div class="nav-section">
                <ul>
                    <li><a href="index.html">ğŸ  Startseite</a></li>
                </ul>
            </div>
            
            <!-- Level 1: Grundlagen -->
            <div class="nav-section" data-level="1">
                <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="background: #4ade80; color: white; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700;">1</span>
                    Level 1: Grundlagen
                    <span style="font-size: 1.2rem;">ğŸŸ¢</span>
                </h3>
                <ul>
                    <li data-page="1__Welcome_Alvik_.html">
                        <a href="1__Welcome_Alvik_.html">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ Der Aufbau
                        </a>
                    </li>
                    <li data-page="1_3_Alvik_mit_Kabel_betreiben.html">
                        <a href="1_3_Alvik_mit_Kabel_betreiben.html">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ Alvik mit Kabel betreiben
                        </a>
                    </li>
                    <li data-page="1_2_Alvik_Grundgeru_st.html">
                        <a href="1_2_Alvik_Grundgeru_st.html">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’» Alvik GrundgerÃ¼st
                        </a>
                    </li>
                    <li data-page="1_3_1_LED_blinken_lassen.html">
                        <a href="1_3_1_LED_blinken_lassen.html">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ LED blinken lassen
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Level 2: Erste Bewegungen -->
            <div class="nav-section locked" data-level="2" data-required-level="1" data-required-count="3">
                <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="background: #60a5fa; color: white; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700;">2</span>
                    Level 2: Erste Bewegungen
                    <span style="font-size: 1.2rem;">ğŸ”µ</span>
                    <span class="lock-icon" style="font-size: 1rem; margin-left: auto;">ğŸ”’</span>
                </h3>
                <ul>
                    <li data-page="1_4_Alvik_ohne_Kabel_betreiben.html">
                        <a href="1_4_Alvik_ohne_Kabel_betreiben.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ Alvik ohne Kabel betreiben
                        </a>
                    </li>
                    <li data-page="1_5_2_Alvik_fa_hrt_auf_Tastendruck.html">
                        <a href="1_5_2_Alvik_fa_hrt_auf_Tastendruck.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ Auf Tastendruck fahren
                        </a>
                    </li>
                    <li data-page="1_5_Alvik_ein_Viereck_fahren_lassen.html">
                        <a href="1_5_Alvik_ein_Viereck_fahren_lassen.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸŒ Viereck fahren
                        </a>
                    </li>
                    <li data-page="1_5_1_Alvik_exakt_fahren_lassen.html">
                        <a href="1_5_1_Alvik_exakt_fahren_lassen.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ Exakt fahren
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Level 3: Sensoren entdecken -->
            <div class="nav-section locked" data-level="3" data-required-level="2" data-required-count="3">
                <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="background: #facc15; color: white; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700;">3</span>
                    Level 3: Sensoren entdecken
                    <span style="font-size: 1.2rem;">ğŸŸ¡</span>
                    <span class="lock-icon" style="font-size: 1rem; margin-left: auto;">ğŸ”’</span>
                </h3>
                <ul>
                    <li data-page="3_0_Alvik_Sensoren_auslesen.html">
                        <a href="3_0_Alvik_Sensoren_auslesen.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ Sensoren auslesen
                        </a>
                    </li>
                    <li data-page="1_5_3_Alvik_API_Collisionsvermeidung.html">
                        <a href="1_5_3_Alvik_API_Collisionsvermeidung.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ Kollisionsvermeidung
                        </a>
                    </li>
                    <li data-page="2_0_Alvik_I2C_testen.html">
                        <a href="2_0_Alvik_I2C_testen.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ I2C Schnittstelle testen
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Level 4: Erweiterte Projekte -->
            <div class="nav-section locked" data-level="4" data-required-level="3" data-required-count="2">
                <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="background: #fb923c; color: white; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; font-weight: 700;">4</span>
                    Level 4: Erweiterte Projekte
                    <span style="font-size: 1.2rem;">ğŸŸ </span>
                    <span class="lock-icon" style="font-size: 1rem; margin-left: auto;">ğŸ”’</span>
                </h3>
                <ul>
                    <li data-page="2_1_Alvik_mit_bme680.html">
                        <a href="2_1_Alvik_mit_bme680.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ”§ Alvik mit BME680 Sensor
                        </a>
                    </li>
                    <li data-page="3_3_Alvik_mit_Oled_Display.html">
                        <a href="3_3_Alvik_mit_Oled_Display.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ Alvik mit OLED Display
                        </a>
                    </li>
                    <li data-page="3_1_Alvik_mit_phyphox.html">
                        <a href="3_1_Alvik_mit_phyphox.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸŒ Alvik mit phyphox
                        </a>
                    </li>
                    <li data-page="3_2_Physik_Beispiel_Alvik.html">
                        <a href="3_2_Physik_Beispiel_Alvik.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸŒ Beschleunigte Bewegung
                        </a>
                    </li>
                    <li data-page="6_0_Mustererkennung.html">
                        <a href="6_0_Mustererkennung.html" class="locked-link">
                            <span class="completion-check">â¬œ</span>
                            ğŸ’¡ Mustererkennung & KI
                        </a>
                    </li>
                </ul>
            </div>
            
            <!-- Referenz & Hilfe -->
            <div class="nav-section">
                <h3>ğŸ“š Referenz & Hilfe</h3>
                <ul>
                    <li><a href="command-center.html">ğŸš€ Command Center</a></li>
                    <li><a href="1_1_Alvik_API.html">ğŸ“– API-Liste</a></li>
                    <li><a href="4_0_Alvik_Kurse_online.html">ğŸŒ Online-Kurse</a></li>
                </ul>
            </div>
            
            <!-- Praxis & Ãœbungen -->
            <div class="nav-section">
                <h3>âœï¸ Praxis & Ãœbungen</h3>
                <ul>
                    <li><a href="5_0_Beispielaufgaben_Alvik.html">ğŸ“ Beispielaufgaben</a></li>
                </ul>
            </div>
        </aside>
        
        <main class="main-content">
            <h2>ğŸ¤– KI auf dem Alvik: Dein Roboter lernt!</h2>

<div style="background: linear-gradient(135deg, rgba(147, 51, 234, 0.15), rgba(59, 130, 246, 0.15)); padding: 2rem; border-radius: 16px; border: 3px solid #9333ea; margin: 2rem 0;">
    <h3 style="margin-top: 0; color: #9333ea;">âœ¨ Das Besondere an diesem Projekt</h3>
    <p style="font-size: 1.1rem; line-height: 1.6;">
        <strong>KÃ¼nstliche Intelligenz ist Ã¼berall</strong> â€“ in deinem Smartphone, in Sprachassistenten, in selbstfahrenden Autos. Und jetzt auch auf deinem Alvik!
        In diesem Projekt bringst du deinem Roboter bei, <strong>Muster zu lernen und eigenstÃ¤ndig auszufÃ¼hren</strong> â€“ genau wie echte KI!
    </p>
</div>

<h3>ğŸ§  Was ist Machine Learning Ã¼berhaupt?</h3>

<p><strong>Machine Learning</strong> (auf Deutsch: "Maschinelles Lernen") ist ein Teilbereich der KÃ¼nstlichen Intelligenz. Statt einem Computer jede einzelne Regel einzuprogrammieren, <strong>lernt er aus Beispielen</strong>!</p>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin: 2rem 0;">
    <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #ef4444;">
        <h4 style="margin-top: 0; color: #ef4444;">âŒ Normale Programmierung</h4>
        <p style="margin: 0; line-height: 1.6;">
            "Wenn Sensor A den Wert 5 misst, dann fahre 10 cm. Wenn Sensor B den Wert 3 misst, dann drehe um 90Â°..."<br><br>
            â†’ Programmierer gibt <strong>alle Regeln</strong> vor
        </p>
    </div>
    <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 12px; border-left: 4px solid #22c55e;">
        <h4 style="margin-top: 0; color: #22c55e;">âœ… Machine Learning</h4>
        <p style="margin: 0; line-height: 1.6;">
            "Hier sind 1000 Beispiele von roten Farben. Lerne selbst, was 'Rot' bedeutet und was du dann tun sollst!"<br><br>
            â†’ Computer <strong>lernt aus Beispielen</strong>
        </p>
    </div>
</div>

<h3>ğŸ¯ Wie funktioniert unser Mini-KI-Roboter?</h3>

<p>Dein Alvik-Roboter lernt in diesem Projekt wie eine KI! Er durchlÃ¤uft die gleichen Phasen wie echte Machine-Learning-Systeme:</p>

<div style="background: white; padding: 2rem; border-radius: 12px; margin: 2rem 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
    <h4 style="color: var(--primary-color); margin-top: 0;">Die 4 Phasen des Lernens</h4>

    <div style="display: flex; align-items: start; gap: 1rem; margin: 1.5rem 0; padding: 1rem; background: #fef3c7; border-radius: 8px;">
        <span style="font-size: 2rem;">1ï¸âƒ£</span>
        <div>
            <h5 style="margin: 0 0 0.5rem 0; color: #92400e;">TRAININGSPHASE (Lernen)</h5>
            <p style="margin: 0;">Du zeigst dem Alvik <strong>5 Farbkarten</strong>. Er scannt jede Farbe und speichert sie.</p>
            <ul style="margin: 0.5rem 0 0 1.5rem;">
                <li>ğŸ”´ <strong>Rot</strong> = VorwÃ¤rts fahren</li>
                <li>ğŸŸ¡ <strong>Gelb</strong> = RÃ¼ckwÃ¤rts fahren</li>
                <li>ğŸŸ¢ <strong>GrÃ¼n</strong> = Rechts drehen</li>
                <li>ğŸ”µ <strong>Blau</strong> = Links drehen</li>
            </ul>
        </div>
    </div>

    <div style="display: flex; align-items: start; gap: 1rem; margin: 1.5rem 0; padding: 1rem; background: #dbeafe; border-radius: 8px;">
        <span style="font-size: 2rem;">2ï¸âƒ£</span>
        <div>
            <h5 style="margin: 0 0 0.5rem 0; color: #1e40af;">MODELL-ERSTELLUNG (Speichern)</h5>
            <p style="margin: 0;">Der Alvik speichert die Farb-Sequenz in seinem "GedÃ¤chtnis" (der Variable <code>pattern_memory[]</code>). Das ist wie ein trainiertes KI-Modell!</p>
        </div>
    </div>

    <div style="display: flex; align-items: start; gap: 1rem; margin: 1.5rem 0; padding: 1rem; background: #fce7f3; border-radius: 8px;">
        <span style="font-size: 2rem;">3ï¸âƒ£</span>
        <div>
            <h5 style="margin: 0 0 0.5rem 0; color: #9f1239;">VALIDIERUNG (ÃœberprÃ¼fen)</h5>
            <p style="margin: 0;">Du siehst auf dem Display, was der Alvik gelernt hat. Erst wenn du OK drÃ¼ckst, geht's weiter â€“ so wie bei echten KI-Systemen, die erst getestet werden mÃ¼ssen!</p>
        </div>
    </div>

    <div style="display: flex; align-items: start; gap: 1rem; margin: 1.5rem 0; padding: 1rem; background: #d1fae5; border-radius: 8px;">
        <span style="font-size: 2rem;">4ï¸âƒ£</span>
        <div>
            <h5 style="margin: 0 0 0.5rem 0; color: #065f46;">INFERENCE (Anwenden)</h5>
            <p style="margin: 0;">Jetzt wird's spannend! Der Alvik fÃ¼hrt das gelernte Muster <strong>komplett selbststÃ¤ndig</strong> aus â€“ ohne dass du noch etwas eingeben musst. Das nennt man in der KI "Inference"!</p>
        </div>
    </div>
</div>

<div class="info-box" style="background: rgba(147, 51, 234, 0.1); border-left: 4px solid #9333ea;">
    ğŸ¤¯ <strong>Vergleich mit echter KI:</strong><br>
    <ul style="margin: 0.5rem 0 0 1.5rem; line-height: 1.8;">
        <li><strong>ChatGPT</strong> wurde mit Millionen von Texten trainiert â†’ erkennt Sprachmuster</li>
        <li><strong>Gesichtserkennung</strong> wurde mit tausenden Fotos trainiert â†’ erkennt Gesichter</li>
        <li><strong>Dein Alvik</strong> wurde mit 5 Farbkarten trainiert â†’ erkennt Farben und fÃ¼hrt Bewegungen aus</li>
    </ul>
    Das Prinzip ist das Gleiche â€“ nur die Datenmenge unterscheidet sich!
</div>

<h3>ğŸ”¬ Das Geheimnis: Kalibrierte Farberkennung</h3>

<p>Das HerzstÃ¼ck dieses Programms ist die Funktion <code>detect_color_calibrated()</code>. Sie arbeitet wie ein neuronales Netz bei Bilderkennung:</p>

<table style="width: 100%; border-collapse: collapse; margin: 1.5rem 0;">
    <thead>
        <tr style="background: var(--primary-color); color: white;">
            <th style="padding: 0.75rem; text-align: left; border: 1px solid #ddd;">Schritt</th>
            <th style="padding: 0.75rem; text-align: left; border: 1px solid #ddd;">Was passiert?</th>
            <th style="padding: 0.75rem; text-align: left; border: 1px solid #ddd;">KI-Vergleich</th>
        </tr>
    </thead>
    <tbody>
        <tr style="background: #f7fafc;">
            <td style="padding: 0.75rem; border: 1px solid #ddd;"><strong>1. Daten sammeln</strong></td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">5 Farbmessungen (RGB) werden gemacht</td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Wie Kamera-Bilder fÃ¼r Bilderkennung</td>
        </tr>
        <tr>
            <td style="padding: 0.75rem; border: 1px solid #ddd;"><strong>2. Umwandeln</strong></td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">RGB â†’ HSV (Farbton, SÃ¤ttigung, Helligkeit)</td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Feature-Extraction (Merkmale herausfiltern)</td>
        </tr>
        <tr style="background: #f7fafc;">
            <td style="padding: 0.75rem; border: 1px solid #ddd;"><strong>3. Durchschnitt</strong></td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Mittelwert aus 5 Messungen</td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Noise Reduction (Fehler reduzieren)</td>
        </tr>
        <tr>
            <td style="padding: 0.75rem; border: 1px solid #ddd;"><strong>4. Klassifizieren</strong></td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Vergleich mit kalibrierten Bereichen</td>
            <td style="padding: 0.75rem; border: 1px solid #ddd;">Classification (In Kategorien einteilen)</td>
        </tr>
    </tbody>
</table>

<div class="tip-box" style="margin: 1.5rem 0; padding: 1.25rem; background: rgba(227, 6, 19, 0.1); border-left: 4px solid var(--primary-color); border-radius: 8px;">
    ğŸ’¡ <strong>Warum HSV statt RGB?</strong><br>
    RGB-Werte Ã¤ndern sich stark bei unterschiedlichem Licht. HSV (Hue-Saturation-Value) ist stabiler:
    <ul style="margin: 0.5rem 0 0 1.5rem;">
        <li><strong>H (Hue)</strong> = Farbton (0-360Â°) â€“ "Welche Farbe?"</li>
        <li><strong>S (Saturation)</strong> = SÃ¤ttigung (0-1) â€“ "Wie krÃ¤ftig?"</li>
        <li><strong>V (Value)</strong> = Helligkeit (0-1) â€“ "Wie hell?"</li>
    </ul>
    Das ist wie bei Instagram-Filtern â€“ egal wie hell/dunkel, die Farbe bleibt erkennbar!
</div>

<h3>Technische Funktionen und Code-Struktur</h3>

<h4>Genutzte Alvik-Funktionen</h4>

<p><strong>Sensorik:</strong></p>
<ul>
    <li><code>get_color()</code> und <code>rgb2hsv()</code> â€“ Liest RGB-Farbwerte und konvertiert sie in HSV-Format fÃ¼r zuverlÃ¤ssige Farberkennung</li>
    <li><code>get_color_label()</code> â€“ Gibt Farbbezeichnungen zurÃ¼ck (wird durch eigene HSV-Erkennung ersetzt)</li>
    <li><code>set_illuminator(True)</code> â€“ Aktiviert die LED-Beleuchtung fÃ¼r konstante LichtverhÃ¤ltnisse</li>
</ul>

<p><strong>Bewegung:</strong></p>
<ul>
    <li><code>move(distance, 'cm', blocking=True)</code> â€“ FÃ¤hrt geradeaus (Rot/Gelb)</li>
    <li><code>rotate(angle, 'deg', blocking=True)</code> â€“ Dreht auf der Stelle (GrÃ¼n/Blau)</li>
</ul>

<p><strong>Feedback:</strong></p>
<ul>
    <li><code>left_led.set_color(r, g, b)</code> / <code>right_led.set_color(r, g, b)</code> â€“ Visuelles Feedback wÃ¤hrend Erkennung</li>
    <li><code>get_touch_ok()</code> â€“ Wartet auf NutzerbestÃ¤tigung zum Start</li>
</ul>

<p><strong>Display (I2C):</strong></p>
<ul>
    <li><code>ssd1306.SSD1306_I2C()</code> â€“ Initialisiert das OLED-Display Ã¼ber I2C (Pins 11/12)</li>
    <li><code>display.text()</code>, <code>display.fill()</code>, <code>display.show()</code> â€“ Textausgabe und Fortschrittsbalken</li>
</ul>

<h3>Code-Struktur (4 Phasen)</h3>

<ol>
    <li><strong>Initialisierung:</strong> Display- und Roboter-Setup, Beleuchtung einschalten, Startbildschirm</li>
    <li><strong>Lernphase:</strong> Schleife erfasst 5 Farben mit <code>detect_color_calibrated()</code>, speichert sie in <code>pattern_memory[]</code>, zeigt Fortschritt am Display</li>
    <li><strong>BestÃ¤tigung:</strong> Blink-Animation bis OK-Taste gedrÃ¼ckt wird, zeigt gelerntes Muster als Symbolsequenz</li>
    <li><strong>AusfÃ¼hrung:</strong> For-Schleife iteriert durch <code>pattern_memory[]</code> und fÃ¼hrt entsprechende Bewegungsbefehle aus, Display zeigt Live-Fortschritt</li>
</ol>

<p><strong>Kern-Algorithmus:</strong> Die Funktion <code>detect_color_calibrated()</code> nimmt 5 HSV-Messungen, bildet Durchschnittswerte und vergleicht diese mit kalibrierten Bereichen (H: Farbton 0-360Â°, S: SÃ¤ttigung 0-1, V: Helligkeit 0-1) fÃ¼r prÃ¤zise Farberkennung.</p>

<div class="image-container">
    <img src="assets/IMG_4055.jpg" alt="Alvik Roboter mit Farbkarten" style="max-width: 100%; height: auto; border-radius: 8px;">
    <p style="text-align: center; color: #666; margin-top: 10px; font-style: italic;">Alvik-Roboter bei der Mustererkennung</p>
</div>

<h3>Python Code</h3>

<pre><code>from machine import Pin, I2C
import ssd1306
from arduino_alvik import ArduinoAlvik
from time import sleep_ms

# ==================== DISPLAY KONFIGURATION ====================
i2c = I2C(sda=Pin(11), scl=Pin(12))
display = ssd1306.SSD1306_I2C(128, 64, i2c)

def display_text(lines, clear=True):
    if clear:
        display.fill(0)
    y = 0
    for line in lines:
        display.text(line, 0, y, 1)
        y += 10
    display.show()

def display_progress_bar(current, total, label=""):
    display.fill(0)
    display.text(label, 0, 0, 1)
    bar_width = int((current / total) * 120)
    display.rect(4, 20, 120, 15, 1)
    display.fill_rect(5, 21, bar_width, 13, 1)
    percent = f"{current}/{total}"
    x = (128 - len(percent) * 8) // 2
    display.text(percent, x, 45, 1)
    display.show()

# ==================== PERFEKT KALIBRIERTE FARBERKENNUNG ====================
def detect_color_calibrated(alvik):
    """
    Exakte Farberkennung mit ALLEN gemessenen HSV-Werten:
    
    ROT:    h=5.11,   s=0.68, v=0.59 (hohe SÃ¤ttigung, mittlere Helligkeit)
    GELB:   h=40.04,  s=0.59, v=0.92 (SEHR hell!)
    GRÃœN:   h=96.76,  s=0.37, v=0.56 (niedrige SÃ¤ttigung, niedrige Helligkeit)
    BLAU:   h=198.13, s=0.36, v=0.80 (niedrige SÃ¤ttigung, hohe Helligkeit)
    """
    
    # 5 Messungen fÃ¼r maximale StabilitÃ¤t
    h_values = []
    s_values = []
    v_values = []
    
    for _ in range(5):
        r, g, b = alvik.get_color()
        h, s, v = alvik.rgb2hsv(r, g, b)
        h_values.append(h)
        s_values.append(s)
        v_values.append(v)
        sleep_ms(30)
    
    # Durchschnittswerte berechnen
    h = sum(h_values) / len(h_values)
    s = sum(s_values) / len(s_values)
    v = sum(v_values) / len(v_values)
    
    # Optional: Debug-Ausgabe (auskommentieren zum Testen)
    # print(f"H:{h:.1f} S:{s:.2f} V:{v:.2f}")
    
    # Zu dunkel = keine gÃ¼ltige Farbe
    if v &lt; 0.10:
        return None
    
    # Zu geringe SÃ¤ttigung UND zu dunkel = Schwarz/Grau
    if s &lt; 0.15 and v &lt; 0.40:
        return None
    
    # ===== PRÃ„ZISE FARBERKENNUNG MIT ALLEN PARAMETERN =====
    
    # ROT: h=5.11, s=0.68, v=0.59
    # Einzige Farbe mit HOHER SÃ¤ttigung + mittlerer Helligkeit
    if (h &lt; 25 or h &gt; 340) and 0.50 &lt; s &lt; 0.85 and 0.40 &lt; v &lt; 0.75:
        return 'RED'
    
    # GELB: h=40.04, s=0.59, v=0.92
    # SEHR HELL (v=0.92) unterscheidet es von allen anderen!
    elif 28 &lt; h &lt; 52 and 0.40 &lt; s &lt; 0.75 and 0.80 &lt; v:
        return 'YELLOW'
    
    # GRÃœN: h=96.76, s=0.37, v=0.56
    # Niedrige SÃ¤ttigung + niedrigste Helligkeit
    elif 72 &lt; h &lt; 122 and 0.20 &lt; s &lt; 0.55 and 0.40 &lt; v &lt; 0.70:
        return 'GREEN'
    
    # BLAU: h=198.13, s=0.36, v=0.80
    # Niedrige SÃ¤ttigung aber HOHE Helligkeit (unterscheidet von GrÃ¼n!)
    elif 173 &lt; h &lt; 223 and 0.20 &lt; s &lt; 0.50 and 0.65 &lt; v &lt; 0.95:
        return 'BLUE'
    
    return None

# ==================== FARB-KONFIGURATION ====================
COLOR_ACTIONS = {
    'RED': {'name': 'Vorwaerts', 'symbol': '^', 'led': (1, 0, 0)},
    'YELLOW': {'name': 'Rueckw.', 'symbol': 'v', 'led': (1, 1, 0)},
    'GREEN': {'name': 'Rechts', 'symbol': '&gt;', 'led': (0, 1, 0)},
    'BLUE': {'name': 'Links', 'symbol': '&lt;', 'led': (0, 0, 1)}
}

MAX_PATTERN_LENGTH = 5
MOVE_DISTANCE = 15
ROTATION_ANGLE = 90

# ==================== INITIALISIERUNG ====================
alvik = ArduinoAlvik()
alvik.begin()
alvik.set_illuminator(True)
sleep_ms(500)

# Startbildschirm
display_text([
    "==================",
    " ALVIK KI-DEMO",
    "==================",
    "",
    "Perfekt",
    "kalibriert!"
])
sleep_ms(2000)

# LEDs BegrÃ¼ÃŸung
for _ in range(3):
    alvik.left_led.set_color(1, 1, 1)
    alvik.right_led.set_color(1, 1, 1)
    sleep_ms(300)
    alvik.left_led.set_color(0, 0, 0)
    alvik.right_led.set_color(0, 0, 0)
    sleep_ms(300)

# ==================== PHASE 1: LERNEN ====================
display_text([
    "LERNPHASE",
    "----------",
    "Zeige Farben:",
    "ROT   = ^",
    "GELB  = v",
    "GRUEN = &gt;",
    "BLAU  = &lt;"
])
sleep_ms(3000)

pattern_memory = []
last_color = None
no_color_counter = 0

while len(pattern_memory) &lt; MAX_PATTERN_LENGTH:
    display_progress_bar(len(pattern_memory), MAX_PATTERN_LENGTH, "Lerne Farben...")
    
    # Nutze perfekt kalibrierte Farberkennung
    current_color = detect_color_calibrated(alvik)
    
    if current_color and current_color != last_color:
        pattern_memory.append(current_color)
        action = COLOR_ACTIONS[current_color]
        
        # LED-Feedback
        alvik.left_led.set_color(*action['led'])
        alvik.right_led.set_color(*action['led'])
        
        # Display-Anzeige
        display.fill(0)
        display.text(f"Farbe {len(pattern_memory)}/{MAX_PATTERN_LENGTH}", 10, 0, 1)
        display.text(current_color, 20, 20, 1)
        display.text(action['symbol'] * 5, 20, 35, 1)
        display.text(action['name'], 15, 50, 1)
        display.show()
        
        last_color = current_color
        no_color_counter = 0
        sleep_ms(1500)
        
        alvik.left_led.set_color(0, 0, 0)
        alvik.right_led.set_color(0, 0, 0)
    
    elif current_color is None:
        no_color_counter += 1
        if no_color_counter &gt; 15:  # 1.5 Sekunden ohne Farbe
            last_color = None
            no_color_counter = 0
    
    sleep_ms(100)

# Gelerntes Muster anzeigen
display.fill(0)
display.text("Gelernt:", 0, 0, 1)
pattern_str = "".join([COLOR_ACTIONS[c]['symbol'] for c in pattern_memory])
x = (128 - len(pattern_str) * 8) // 2
display.text(pattern_str, x, 28, 1)
display.show()
sleep_ms(2000)

# ==================== PHASE 2: BESTÃ„TIGUNG ====================
blink_state = True
while not alvik.get_touch_ok():
    display.fill(0)
    if blink_state:
        display.text("Bereit!", 35, 15, 1)
        display.text("Druecke OK", 20, 35, 1)
    display.show()
    blink_state = not blink_state
    sleep_ms(500)

# ==================== PHASE 3: AUSFÃœHREN ====================
display.fill(0)
display.text("START!", 40, 28, 1)
display.show()
sleep_ms(1000)

for i, color in enumerate(pattern_memory):
    action = COLOR_ACTIONS[color]
    
    display.fill(0)
    display.text(f"Schritt {i+1}/{len(pattern_memory)}", 10, 0, 1)
    done_pattern = "".join([COLOR_ACTIONS[c]['symbol'] for c in pattern_memory[:i+1]])
    display.text(done_pattern, 5, 20, 1)
    display.text(action['symbol'] * 3, 40, 35, 1)
    display.text(action['name'], 20, 50, 1)
    display.show()
    
    alvik.left_led.set_color(*action['led'])
    alvik.right_led.set_color(*action['led'])
    
    if color == 'RED':
        alvik.move(MOVE_DISTANCE, 'cm', blocking=True)
    elif color == 'YELLOW':
        alvik.move(-MOVE_DISTANCE, 'cm', blocking=True)
    elif color == 'GREEN':
        alvik.rotate(-ROTATION_ANGLE, 'deg', blocking=True)
    elif color == 'BLUE':
        alvik.rotate(ROTATION_ANGLE, 'deg', blocking=True)
    
    sleep_ms(300)
    alvik.left_led.set_color(0, 0, 0)
    alvik.right_led.set_color(0, 0, 0)

# ==================== ABSCHLUSS ====================
display_text(["", "  FERTIG!", "", "  Muster", "  ausgefuehrt!", "", "  :-)"])

for _ in range(5):
    alvik.left_led.set_color(0, 1, 0)
    alvik.right_led.set_color(0, 1, 0)
    sleep_ms(200)
    alvik.left_led.set_color(0, 0, 0)
    alvik.right_led.set_color(0, 0, 0)
    sleep_ms(200)

alvik.brake()
alvik.set_illuminator(False)
sleep_ms(5000)
display.fill(0)
display.show()
</code></pre>


    <h3 style="margin-top: 4rem;">ğŸš€ Deine eigenen KI-Projekte mit dem Alvik</h3>

<p>Jetzt wo du verstehst, wie Machine Learning funktioniert, kannst du eigene coole KI-Projekte umsetzen! Hier sind inspirierende Ideen:</p>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin: 2rem 0;">

    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 12px; color: white;">
        <h4 style="margin: 0 0 1rem 0;">ğŸ® Gesten-Steuerung</h4>
        <p style="margin: 0; opacity: 0.95;">Trainiere den Alvik, verschiedene Hand-Gesten zu erkennen! Nutze den Abstandssensor und lass ihn lernen: Schnelle Bewegung = VorwÃ¤rts, Langsame = Stop, Auf-Ab = Drehen</p>
    </div>

    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 1.5rem; border-radius: 12px; color: white;">
        <h4 style="margin: 0 0 1rem 0;">ğŸµ Ton-Erkennung</h4>
        <p style="margin: 0; opacity: 0.95;">Lass den Alvik auf Klatschen oder Pfeifen reagieren! Messe mit dem Mikrofon verschiedene TÃ¶ne und lerne: 1x Klatschen = Start, 2x = Stop, Pfeifen = Drehen</p>
    </div>

    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 1.5rem; border-radius: 12px; color: white;">
        <h4 style="margin: 0 0 1rem 0;">ğŸ—ºï¸ Labyrinth-LÃ¶ser</h4>
        <p style="margin: 0; opacity: 0.95;">Der Alvik lernt, wie man Labyrinthe lÃ¶st! Speichere erfolgreiche Wege und lass ihn beim nÃ¤chsten Mal den gelernten Weg fahren â€“ wie ein GPS!</p>
    </div>

    <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); padding: 1.5rem; border-radius: 12px; color: white;">
        <h4 style="margin: 0 0 1rem 0;">ğŸŒ¡ï¸ Umwelt-Assistent</h4>
        <p style="margin: 0; opacity: 0.95;">Mit BME680-Sensor: Lerne verschiedene Raum-"ZustÃ¤nde" (zu warm, zu kalt, gute Luft, schlechte Luft) und lass den Alvik entsprechend reagieren!</p>
    </div>

    <div style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); padding: 1.5rem; border-radius: 12px; color: white;">
        <h4 style="margin: 0 0 1rem 0;">ğŸ¨ KÃ¼nstler-Roboter</h4>
        <p style="margin: 0; opacity: 0.95;">Lass den Alvik Muster auf Papier zeichnen! Lerne ihm verschiedene Bewegungssequenzen bei und er "malt" geometrische Formen automatisch</p>
    </div>

    <div style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 1.5rem; border-radius: 12px; color: #333;">
        <h4 style="margin: 0 0 1rem 0;">ğŸ Rennstrecken-Lernen</h4>
        <p style="margin: 0; opacity: 0.9;">Der Alvik fÃ¤hrt eine Strecke ab und lernt sie! Beim zweiten Durchgang fÃ¤hrt er schneller, weil er weiÃŸ wo die Kurven sind â€“ wie Rennfahrer!</p>
    </div>

</div>

<div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(249, 115, 22, 0.2)); padding: 2rem; border-radius: 16px; border: 3px solid #f59e0b; margin: 3rem 0;">
    <h3 style="margin-top: 0; color: #92400e;">ğŸ’­ Denk weiter: Was ist mit echter KI mÃ¶glich?</h3>
    <p style="font-size: 1.05rem; line-height: 1.7;">
        Du hast jetzt die Grundlagen verstanden! In der echten KI-Welt werden Ã¤hnliche Prinzipien verwendet â€“ nur viel komplexer:
    </p>
    <ul style="line-height: 1.8; margin: 1rem 0;">
        <li><strong>ğŸš— Selbstfahrende Autos</strong> lernen aus Millionen Kilometer StraÃŸenfahrten</li>
        <li><strong>ğŸ¥ Medizinische KI</strong> erkennt Krankheiten auf RÃ¶ntgenbildern â€“ trainiert mit tausenden Beispielen</li>
        <li><strong>â™Ÿï¸ Schach-Computer</strong> lernen Strategien durch Millionen gespielte Partien</li>
        <li><strong>ğŸ¬ Netflix & YouTube</strong> lernen deine Vorlieben und empfehlen passende Inhalte</li>
        <li><strong>ğŸŒ Klimamodelle</strong> lernen aus historischen Wetterdaten, um die Zukunft vorherzusagen</li>
    </ul>
    <p style="font-size: 1.05rem; line-height: 1.7; margin-top: 1.5rem; font-weight: 600;">
        Mit dem Alvik hast du den ersten Schritt gemacht â€“ wer weiÃŸ, vielleicht entwickelst du eines Tages die nÃ¤chste bahnbrechende KI! ğŸš€
    </p>
</div>

    <!-- Challenge Sektion -->
    <div class="challenge-box" style="margin: 4rem 0 2rem; padding: 2.5rem; background: linear-gradient(135deg, rgba(227, 6, 19, 0.08), rgba(103, 116, 122, 0.08)); border-radius: 20px; border: 3px solid var(--primary-color);">
        <div style="display: flex; gap: 1.5rem; margin-bottom: 2rem;">
            <span style="font-size: 3rem;">ğŸ¯</span>
            <div>
                <h2 style="margin: 0 0 0.5rem 0; color: var(--primary-color);">Challenge: Machine Learning verstehen</h2>
                <p style="margin: 0; opacity: 0.9;">Teste dein Wissen Ã¼ber KI und Machine Learning!</p>
            </div>
        </div>

        <!-- Quiz -->
        <div style="background: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <h3 style="color: var(--primary-color); margin-top: 0;">ğŸ“ Quiz</h3>
            <p style="font-weight: 600; margin-bottom: 1rem;">Was ist der Hauptunterschied zwischen normaler Programmierung und Machine Learning?</p>

            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin: 1.5rem 0;">
                <label style="display: flex; align-items: center; padding: 1rem; background: #f7fafc; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;">
                    <input type="radio" name="quiz_ml" value="a" style="margin-right: 0.75rem; width: 20px; height: 20px;">
                    <span>ML ist schneller als normale Programmierung</span>
                </label>
                <label style="display: flex; align-items: center; padding: 1rem; background: #f7fafc; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;">
                    <input type="radio" name="quiz_ml" value="b" style="margin-right: 0.75rem; width: 20px; height: 20px;">
                    <span>Bei ML lernt der Computer aus Beispielen, statt dass alle Regeln vorgegeben werden</span>
                </label>
                <label style="display: flex; align-items: center; padding: 1rem; background: #f7fafc; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;">
                    <input type="radio" name="quiz_ml" value="c" style="margin-right: 0.75rem; width: 20px; height: 20px;">
                    <span>ML braucht keine Sensoren</span>
                </label>
                <label style="display: flex; align-items: center; padding: 1rem; background: #f7fafc; border-radius: 8px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s;">
                    <input type="radio" name="quiz_ml" value="d" style="margin-right: 0.75rem; width: 20px; height: 20px;">
                    <span>ML funktioniert nur mit Robotern</span>
                </label>
            </div>

            <button onclick="checkAnswer_quiz_ml()" style="padding: 0.75rem 2rem; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 1rem;">Antwort prÃ¼fen</button>
            <div id="quiz-feedback_ml" style="margin-top: 1rem; padding: 1rem; border-radius: 8px; display: none;"></div>
        </div>

        <!-- Experimentier-Challenge -->
        <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 12px; margin-bottom: 2rem; border: 2px dashed rgba(227, 6, 19, 0.3);">
            <h3 style="color: var(--primary-color); margin-top: 0;">ğŸ’¡ Experimentier-Challenge</h3>
            <p><strong>Aufgabe:</strong> Ãœberlege dir ein eigenes Muster mit den 4 Farben und lass den Alvik es lernen!</p>

            <div class="tip-box" style="margin: 1.5rem 0; padding: 1.25rem; background: rgba(103, 116, 122, 0.1); border-left: 4px solid var(--secondary-color); border-radius: 8px;">
                ğŸ’¡ <strong>Ideen zum Experimentieren:</strong>
                <ul style="margin: 0.5rem 0 0 1.5rem;">
                    <li>Erstelle ein Muster, das den Alvik im Kreis fahren lÃ¤sst</li>
                    <li>Lass ihn ein "L" oder "T" fahren</li>
                    <li>Kombiniere viele VorwÃ¤rts-Bewegungen mit nur einer Drehung</li>
                    <li>Was passiert mit 5x Rot? Probiere es aus!</li>
                </ul>
            </div>
        </div>

        <!-- Selbsttest -->
        <div style="background: white; padding: 2rem; border-radius: 12px;">
            <h3 style="color: var(--primary-color); margin-top: 0;">âœ… Selbsttest</h3>
            <p style="margin-bottom: 1.5rem;">Hake ab, was du gelernt hast:</p>

            <label style="display: flex; align-items: start; gap: 0.75rem; padding: 0.75rem; cursor: pointer; border-radius: 8px; transition: background 0.2s;" onchange="updateProgress_ml()">
                <input type="checkbox" style="margin-top: 0.25rem; width: 20px; height: 20px;">
                <span>Ich verstehe den Unterschied zwischen normaler Programmierung und Machine Learning</span>
            </label>

            <label style="display: flex; align-items: start; gap: 0.75rem; padding: 0.75rem; cursor: pointer; border-radius: 8px; transition: background 0.2s;" onchange="updateProgress_ml()">
                <input type="checkbox" style="margin-top: 0.25rem; width: 20px; height: 20px;">
                <span>Ich kenne die 4 Phasen des Lernens (Training, Modell, Validierung, Inference)</span>
            </label>

            <label style="display: flex; align-items: start; gap: 0.75rem; padding: 0.75rem; cursor: pointer; border-radius: 8px; transition: background 0.2s;" onchange="updateProgress_ml()">
                <input type="checkbox" style="margin-top: 0.25rem; width: 20px; height: 20px;">
                <span>Ich kann erklÃ¤ren, warum HSV-Werte besser fÃ¼r Farberkennung sind als RGB</span>
            </label>

            <div id="progress-counter_ml" style="margin-top: 1.5rem; padding: 1rem; background: linear-gradient(135deg, rgba(227, 6, 19, 0.1), rgba(103, 116, 122, 0.1)); border-radius: 8px; text-align: center; font-weight: 600;">
                Fortschritt: <span id="progress-text_ml">0/3</span> âœ“
            </div>
        </div>
    </div>

    <script>
    function checkAnswer_quiz_ml() {
        const selected = document.querySelector('input[name="quiz_ml"]:checked');
        const feedback = document.getElementById('quiz-feedback_ml');

        if (!selected) {
            feedback.style.display = 'block';
            feedback.style.background = '#fff3cd';
            feedback.style.border = '2px solid #ffc107';
            feedback.innerHTML = 'âš ï¸ Bitte wÃ¤hle eine Antwort aus!';
            return;
        }

        if (selected.value === 'b') {
            feedback.style.display = 'block';
            feedback.style.background = '#d4edda';
            feedback.style.border = '2px solid #28a745';
            feedback.innerHTML = 'ğŸ‰ <strong>Richtig!</strong> Genau das ist Machine Learning! Der Computer lernt aus Beispielen (wie den 5 Farbkarten), statt dass man ihm jede einzelne Regel einprogrammieren muss. Das macht KI so flexibel und mÃ¤chtig!';
        } else {
            feedback.style.display = 'block';
            feedback.style.background = '#f8d7da';
            feedback.style.border = '2px solid #dc3545';
            feedback.innerHTML = 'âŒ <strong>Nicht ganz.</strong> Der Kern von Machine Learning ist, dass der Computer <strong>aus Beispielen lernt</strong>, statt dass alle Regeln vorprogrammiert werden. Schau dir die 4 Phasen nochmal an!';
        }
    }

    function updateProgress_ml() {
        const checkboxes = document.querySelectorAll('.challenge-box input[type="checkbox"]');
        const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
        document.getElementById('progress-text_ml').textContent = `${checked}/3`;
    }
    </script>
        </main>
    </div>
    
    <a href="#" class="back-to-top">â†‘</a>    
    <footer style="margin-top: 4rem; padding: 2rem; text-align: center; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border-radius: 16px;">
        <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 2rem; margin-bottom: 1rem;">
            <div>
                <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.de" target="_blank" rel="license" style="text-decoration: none;">
                    <img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" alt="Creative Commons Lizenz CC BY-SA 4.0" style="border: 0; vertical-align: middle;">
                </a>
            </div>
            <div style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.8);">
                <strong>Arduino Alvik Lernplattform</strong><br>
                Medienzentrum GieÃŸen-Vogelsberg<br>
                Lizenziert unter <a href="LICENSE" style="color: var(--accent-color); text-decoration: none;">CC BY-SA 4.0</a>
            </div>
        </div>
        <div style="margin-top: 1rem; font-size: 0.85rem;">
            <a href="impressum.html" style="color: var(--primary-color); text-decoration: none; margin: 0 1rem;">Impressum</a>
            <span style="color: rgba(255, 255, 255, 0.5);">|</span>
            <a href="datenschutz.html" style="color: var(--primary-color); text-decoration: none; margin: 0 1rem;">Datenschutz</a>
            <span style="color: rgba(255, 255, 255, 0.5);">|</span>
            <a href="https://github.com/mzgivb/alvik-webseite" target="_blank" style="color: var(--primary-color); text-decoration: none; margin: 0 1rem;">GitHub</a>
        </div>
    </footer>
    
    <script src="js/main.js"></script>
</body>
</html>